import{_ as S,r as B,w as k,b_ as L,o as m,e as v,h as e,d as o,g as c,t as N,i as a,a as T,c as z,bq as j,al as A,N as D,bx as w,b$ as V,b as C,am as E,F as I,f as P,an as H,bQ as F}from"./entry-21db2f40.mjs";import{_ as G}from"./Group-1cd53dfb.mjs";import{u as O,N as R}from"./Pagination-2bc07178.mjs";import{_ as U}from"./HotCourseList-2391f2df.mjs";import{T as q}from"./ThumbsUpSharp-92759cd9.mjs";import{N as M}from"./Icon-8b068cec.mjs";import{N as Q}from"./Image-ec1fc6fc.mjs";import{N as J}from"./Tag-06ce51bd.mjs";import{N as K,a as W}from"./BreadcrumbItem-d842e664.mjs";import{N as X,a as Y}from"./Grid-87bc6c3f.mjs";import{N as Z}from"./Divider-96cbb6d0.mjs";import{N as $}from"./Avatar-a2a8fb7e.mjs";import"./use-locale-d1b818a5.mjs";import"./use-merged-state-aa6f3d5b.mjs";import"./Input-16e77b41.mjs";import"./Popover-ea85df19.mjs";import"./get-bc1ef6a5.mjs";import"./next-frame-once-08317937.mjs";import"./create-f83f90a7.mjs";import"./CourseList-311e2910.mjs";import"./Price-f7b39efa.mjs";import"./utils-4e919375.mjs";import"./get-slot-f07f150d.mjs";const tt={__name:"Comment",props:["post_id"],async setup(x,{expose:l}){l();let r,t;const _=x,n=B(1);let s=B(5);const{pending:h,error:p,rows:u,total:b,refresh:f}=([r,t]=k(()=>O(()=>L(()=>({limit:s.value,page:(n==null?void 0:n.value)||1,post_id:_==null?void 0:_.post_id})))),r=await r,t(),r);function d(g){n.value=g,f()}const i={props:_,page:n,limit:s,pending:h,error:p,rows:u,total:b,refresh:f,handlePageChange:d,NPagination:R};return Object.defineProperty(i,"__isScriptSetup",{enumerable:!1,value:!0}),i}},et=a("div",{class:"px-5 pb-5"},[a("h4",null,"\u7CBE\u5F69\u8BC4\u8BBA")],-1),ot={class:"flex justify-center items-center mt-5 mb-10"};function at(x,l,r,t,_,n){const s=G;return m(),v("div",null,[et,e(s,{pending:t.pending,error:t.error,isEmpty:t.rows.length===0},{default:o(()=>[c(N(t.rows)+" ",1),a("div",ot,[e(t.NPagination,{size:"large","item-count":t.total,page:t.page,"page-size":t.limit,"on-update:page":t.handlePageChange},null,8,["item-count","page","page-size"])])]),_:1},8,["pending","error","isEmpty"])])}var rt=S(tt,[["render",at]]);const nt={__name:"[id]",async setup(x,{expose:l}){l();let r,t;const _=T(),n=_.params.id,{data:s,error:h,pending:p}=([r,t]=k(()=>V(n)),r=await r,t(),r),u=z(()=>{var g,y;if(p.value)return"\u5E16\u5B50\u8BE6\u60C5";let i=(y=(g=s.value)==null?void 0:g.desc)==null?void 0:y.text;return i&&i.length>6&&(i=i.slice(0,6)+"..."),i});j({title:u});const{supportLoading:b,handleSupport:f}=A(),d={route:_,id:n,data:s,error:h,pending:p,title:u,supportLoading:b,handleSupport:f,NIcon:M,NImage:Q,NTag:J,NButton:D,NBreadcrumb:K,NBreadcrumbItem:W,NGrid:X,NGridItem:Y,NDivider:Z,NAvatar:$,ThumbsUpSharp:q};return Object.defineProperty(d,"__isScriptSetup",{enumerable:!1,value:!0}),d}},st=c("\u9996\u9875"),it=c("\u793E\u533A\u5217\u8868"),_t={class:"bg-white mb-6 rounded"},dt={class:"flex p-5 pb-0"},ct={class:"ml-2 flex-1"},lt={class:"!text-orange-300"},mt=c(" \u7F6E\u9876 "),pt={class:"text-gray-500"},ut={class:"p-5 pt-0"},ft={class:"postText"},gt={class:"flex flex-col items-center"},Nt={class:"flex justify-center items-center"},ht=c("\u53D1\u5E03\u5E16\u5B50");function bt(x,l,r,t,_,n){const s=F,h=w("n-space"),p=w("n-image-group"),u=G,b=rt,f=U;return m(),v("div",null,[e(t.NBreadcrumb,null,{default:o(()=>[e(t.NBreadcrumbItem,null,{default:o(()=>[e(s,{to:"/"},{default:o(()=>[st]),_:1})]),_:1}),e(t.NBreadcrumbItem,null,{default:o(()=>[e(s,{to:"/bbs/0/1"},{default:o(()=>[it]),_:1})]),_:1}),e(t.NBreadcrumbItem,null,{default:o(()=>[c(N(t.title),1)]),_:1})]),_:1}),e(t.NGrid,{"x-gap":20},{default:o(()=>[e(t.NGridItem,{span:18},{default:o(()=>[e(u,{pending:t.pending,error:t.error},{default:o(()=>[a("section",_t,[a("div",dt,[e(t.NAvatar,{size:40,src:t.data.user.avatar},null,8,["src"]),a("div",ct,[a("h4",lt,[c(N(t.data.user.name)+" ",1),t.data.is_top?(m(),C(t.NTag,{key:0,class:"ml-1",size:"small",type:"success",bordered:!1},{default:o(()=>[mt]),_:1})):E("",!0)]),a("small",pt,"\u53D1\u5E03\u65F6\u95F4\uFF1A"+N(t.data.created_time),1)])]),e(t.NDivider),a("section",ut,[(m(!0),v(I,null,P(t.data.content,(d,i)=>(m(),v("div",{key:i},[a("p",ft,N(d.text),1),a("div",gt,[e(p,null,{default:o(()=>[e(h,null,{default:o(()=>[(m(!0),v(I,null,P(d.images,(g,y)=>(m(),C(t.NImage,{class:"mb-2 rounded shadow",key:y,src:g,"object-fit":"cover"},null,8,["src"]))),128))]),_:2},1024)]),_:2},1024)])]))),128)),a("div",Nt,[e(t.NButton,{secondary:"",strong:"",size:"tiny",class:"mr-3",type:t.data.issupport?"primary":"tertiary",onClick:l[0]||(l[0]=H(d=>t.handleSupport(t.data),["stop"])),loading:t.supportLoading},{icon:o(()=>[e(t.NIcon,null,{default:o(()=>[e(t.ThumbsUpSharp)]),_:1})]),default:o(()=>[c(" \u70B9\u8D5E "+N(t.data.support_count||0),1)]),_:1},8,["type","loading"])])])])]),_:1},8,["pending","error"]),e(t.NDivider),e(b,{post_id:t.id},null,8,["post_id"])]),_:1}),e(t.NGridItem,{span:6},{default:o(()=>[e(t.NButton,{type:"primary",class:"mb-5 w-full"},{default:o(()=>[ht]),_:1}),e(f)]),_:1})]),_:1})])}var Ut=S(nt,[["render",bt]]);export{Ut as default};
