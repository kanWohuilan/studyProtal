import{ag as j,av as L,c as y,r as C,D as Q,a7 as q,k as O,I as X,aw as z,z as B,x as I,a8 as F,s as G,m as U,X as Y,U as H,ap as J,V as W,ax as Z,ay as A,y as K}from"./entry-21db2f40.mjs";import{g as ee}from"./get-slot-f07f150d.mjs";import{b as te}from"./next-frame-once-08317937.mjs";function se(e){if(typeof e=="number")return{"":e.toString()};const t={};return e.split(/ +/).forEach(i=>{if(i==="")return;const[r,n]=i.split(":");n===void 0?t[""]=r:t[r]=n}),t}function x(e,t){var i;if(e==null)return;const r=se(e);if(t===void 0)return r[""];if(typeof t=="string")return(i=r[t])!==null&&i!==void 0?i:r[""];if(Array.isArray(t)){for(let n=t.length-1;n>=0;--n){const s=t[n];if(s in r)return r[s]}return r[""]}else{let n,s=-1;return Object.keys(r).forEach(l=>{const o=Number(l);!Number.isNaN(o)&&t>=o&&o>=s&&(s=o,n=r[l])}),n}}function ne(e){var t;const i=(t=e.dirs)===null||t===void 0?void 0:t.find(({dir:r})=>r===j);return!!(i&&i.value===!1)}const re={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function oe(e){return`(min-width: ${e}px)`}const N={};function ie(e=re){if(!L)return y(()=>[]);if(typeof window.matchMedia!="function")return y(()=>[]);const t=C({}),i=Object.keys(e),r=(n,s)=>{n.matches?t.value[s]=!0:t.value[s]=!1};return i.forEach(n=>{const s=e[n];let l,o;N[s]===void 0?(l=window.matchMedia(oe(s)),l.addEventListener?l.addEventListener("change",d=>{o.forEach(u=>{u(d,n)})}):l.addListener&&l.addListener(d=>{o.forEach(u=>{u(d,n)})}),o=new Set,N[s]={mql:l,cbs:o}):(l=N[s].mql,o=N[s].cbs),o.add(r),l.matches&&o.forEach(d=>{d(l,n)})}),Q(()=>{i.forEach(n=>{const{cbs:s}=N[e[n]];s.has(r)&&s.delete(r)})}),y(()=>{const{value:n}=t;return i.filter(s=>n[s])})}const V=1,P=q("n-grid"),T=1,ae={span:{type:[Number,String],default:T},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}};var ve=O({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:ae,setup(){const{isSsrRef:e,xGapRef:t,itemStyleRef:i,overflowRef:r}=X(P),n=z();return{overflow:r,itemStyle:i,deriveStyle:()=>{e.value;const{privateSpan:s=T,privateShow:l=!0,privateColStart:o=void 0,privateOffset:d=0}=n.vnode.props,{value:u}=t,S=B(u||0);return{display:l?"":"none",gridColumn:`${o!=null?o:`span ${s}`} / span ${s}`,marginLeft:d?`calc((100% - (${s} - 1) * ${S}) / ${s} * ${d} + ${S} * ${d})`:""}}}},render(){var e,t;return I("div",{style:[this.itemStyle,this.deriveStyle()]},(t=(e=this.$slots).default)===null||t===void 0?void 0:t.call(e,{overflow:this.overflow}))}});const le={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},D=24,$="__ssr__",fe={responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:D},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}};var ce=O({name:"Grid",inheritAttrs:!1,props:fe,setup(e){const{mergedClsPrefixRef:t,mergedBreakpointsRef:i}=F(e),r=/^\d+$/,n=C(void 0),s=ie((i==null?void 0:i.value)||le),l=G(()=>!!(e.itemResponsive||!r.test(e.cols.toString())||!r.test(e.xGap.toString())||!r.test(e.yGap.toString()))),o=y(()=>{if(!!l.value)return e.responsive==="self"?n.value:s.value}),d=G(()=>{var f;return(f=Number(x(e.cols.toString(),o.value)))!==null&&f!==void 0?f:D}),u=G(()=>x(e.xGap.toString(),o.value)),S=G(()=>x(e.yGap.toString(),o.value)),E=f=>{n.value=f.contentRect.width},c=f=>{te(E,f)},b=C(!1),R=y(()=>{if(e.responsive==="self")return c}),p=C(!1),m=C();return U(()=>{const{value:f}=m;f&&f.hasAttribute($)&&(f.removeAttribute($),p.value=!0)}),Y(P,{isSsrRef:p,itemStyleRef:H(e,"itemStyle"),xGapRef:u,overflowRef:b}),{isSsr:!J,contentEl:m,mergedClsPrefix:t,style:y(()=>({width:"100%",display:"grid",gridTemplateColumns:`repeat(${d.value}, minmax(0, 1fr))`,columnGap:B(u.value),rowGap:B(S.value)})),isResponsive:l,responsiveQuery:o,responsiveCols:d,handleResize:R,overflow:b}},render(){const e=()=>{var t,i,r,n,s,l,o;this.overflow=!1;const d=Z(ee(this)),u=[],{collapsed:S,collapsedRows:E,responsiveCols:c,responsiveQuery:b}=this;d.forEach(a=>{var _,h,v,g;if(((_=a==null?void 0:a.type)===null||_===void 0?void 0:_.__GRID_ITEM__)!==!0)return;if(ne(a)){const w=A(a);w.props?w.props.privateShow=!1:w.props={privateShow:!1},u.push({child:w,rawChildSpan:0});return}a.dirs=((h=a.dirs)===null||h===void 0?void 0:h.filter(({dir:w})=>w!==j))||null;const M=A(a),k=Number((g=x((v=M.props)===null||v===void 0?void 0:v.span,b))!==null&&g!==void 0?g:V);k!==0&&u.push({child:M,rawChildSpan:k})});let R=0;const p=(t=u[u.length-1])===null||t===void 0?void 0:t.child;if(p!=null&&p.props){const a=(i=p.props)===null||i===void 0?void 0:i.suffix;a!==void 0&&a!==!1&&(R=(n=(r=p.props)===null||r===void 0?void 0:r.span)!==null&&n!==void 0?n:V,p.props.privateSpan=R,p.props.privateColStart=c+1-R,p.props.privateShow=(s=p.props.privateShow)!==null&&s!==void 0?s:!0)}let m=0,f=!1;for(const{child:a,rawChildSpan:_}of u){if(f&&(this.overflow=!0),!f){const h=Number((o=x((l=a.props)===null||l===void 0?void 0:l.offset,b))!==null&&o!==void 0?o:0),v=Math.min(_+h,c);if(a.props?(a.props.privateSpan=v,a.props.privateOffset=h):a.props={privateSpan:v,privateOffset:h},S){const g=m%c;v+g>c&&(m+=c-g),v+m+R>E*c?f=!0:m+=v}}f&&(a.props?a.props.privateShow!==!0&&(a.props.privateShow=!1):a.props={privateShow:!1})}return I("div",K({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[$]:this.isSsr||void 0},this.$attrs),u.map(({child:a})=>a))};return this.isResponsive&&this.responsive==="self"?I(W,{onResize:this.handleResize},{default:e}):e()}});export{ce as N,ve as a};
