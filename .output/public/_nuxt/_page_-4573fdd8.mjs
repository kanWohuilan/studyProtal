import{_ as w,r as I,o as d,e as k,h as l,d as p,g as y,t as x,i as f,N as T,ao as N,n as D,bq as F,w as L,b,f as S,F as j,ca as A,bz as E}from"./entry-21db2f40.mjs";import{u as O,N as V}from"./Pagination-2bc07178.mjs";import{N as U}from"./Tag-06ce51bd.mjs";import{N as q}from"./Image-ec1fc6fc.mjs";import{_ as G}from"./Group-1cd53dfb.mjs";import"./use-locale-d1b818a5.mjs";import"./use-merged-state-aa6f3d5b.mjs";import"./Input-16e77b41.mjs";import"./Popover-ea85df19.mjs";import"./get-bc1ef6a5.mjs";import"./next-frame-once-08317937.mjs";import"./create-f83f90a7.mjs";import"./utils-4e919375.mjs";const H={__name:"FavaList",props:{item:Object},emits:["delete"],setup(_,{expose:n,emit:t}){n();const e=_,s=()=>{D(`/detail/${e.item.type}/${e.item.goods.id}`)},r={course:"\u8BFE\u7A0B",book:"\u7535\u5B50\u4E66",column:"\u4E13\u680F",live:"\u76F4\u64AD"},a=I(!1),o={props:e,open:s,t:r,emit:t,loading:a,deleteItem:()=>{const{dialog:i,message:g}=N(["dialog","message"]);i.warning({content:"\u662F\u5426\u8981\u53D6\u6D88\u8BE5\u6536\u85CF\uFF1F",positiveText:"\u786E\u5B9A",negativeText:"\u53D6\u6D88",onPositiveClick:async()=>{const{item:c}=e;a.value=!0,t("delete",{goods_id:c.goods.id,type:c.type,success(){g.success("\u5220\u9664\u6210\u529F"),a.value=!1},fail(){a.value=!1}})}})},NTag:U,NImage:q,NButton:T,createDiscreteApi:N};return Object.defineProperty(o,"__isScriptSetup",{enumerable:!1,value:!0}),o}},M={class:"border flex p-3 mb-5 items-center"},J={class:"text-gray-500 text-sm"},K=y("\u67E5\u770B"),Q=y("\u5220\u9664");function R(_,n,t,e,s,r){return d(),k("div",M,[l(e.NTag,{bordered:!1,type:"info",size:"small",class:"mr-2"},{default:p(()=>[y(x(e.t[t.item.type]),1)]),_:1}),l(e.NImage,{src:t.item.goods.cover,class:"w-[40px] rounded mr-2"},null,8,["src"]),f("span",J,x(t.item.goods.title),1),l(e.NButton,{class:"ml-auto mr-3",type:"primary",size:"tiny",onClick:e.open},{default:p(()=>[K]),_:1}),l(e.NButton,{type:"error",size:"tiny",onClick:e.deleteItem,loading:e.loading},{default:p(()=>[Q]),_:1},8,["loading"])])}var W=w(H,[["render",R]]);const X={__name:"[page]",async setup(_,{expose:n}){n();let t,e;F({title:"\u6211\u7684\u6536\u85CF"});const{page:s,limit:r,total:a,handlePageChange:m,rows:o,pending:i,error:g,refresh:c}=([t,e]=L(()=>O(({page:u,limit:h})=>A(u))),t=await t,e(),t);async function P({goods_id:u,type:h,success:z,fail:B}){let{error:C}=await E({goods_id:u,type:h});C.value?B():(z(),c())}const v={page:s,limit:r,total:a,handlePageChange:m,rows:o,pending:i,error:g,refresh:c,handleDeleteItem:P,NPagination:V};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}},Y={class:"p-3"},Z={class:"flex justify-center items-center mt-5 pb-10"};function $(_,n,t,e,s,r){const a=W,m=G;return d(),b(m,{pending:e.pending,error:e.error,isEmpty:e.rows.length===0},{default:p(()=>[f("div",Y,[(d(!0),k(j,null,S(e.rows,(o,i)=>(d(),b(a,{key:i,item:o,onDelete:e.handleDeleteItem},null,8,["item"]))),128))]),f("div",Z,[l(e.NPagination,{size:"large",page:e.page,"item-count":e.total,"page-size":e.limit,"on-update:page":e.handlePageChange},null,8,["page","item-count","page-size","on-update:page"])])]),_:1},8,["pending","error","isEmpty"])}var pe=w(X,[["render",$]]);export{pe as default};
