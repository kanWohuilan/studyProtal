import{_ as B,a as q,r as p,bq as F,br as I,c as T,bs as S,o as w,e as V,h as a,d as r,F as z,N as A,ao as b,b as C,am as U,i as g,g as o,t as h,bS as E,bT as R,bU as j,bV as D,n as H,bQ as L}from"./entry-21db2f40.mjs";import{N as O,a as P}from"./FormItem-38aec32c.mjs";import{a as Q}from"./Input-16e77b41.mjs";import{N as G}from"./Alert-ea06a089.mjs";import{N as J}from"./Tag-06ce51bd.mjs";import"./use-merged-state-aa6f3d5b.mjs";import"./get-bc1ef6a5.mjs";import"./use-locale-d1b818a5.mjs";const K={__name:"login",setup(x,{expose:s}){s();const d=q(),e=p("login"),i=p("\u767B\u5F55");F({title:i}),console.log();const m=p(null),t=I({username:"admin",password:"admin123",repassword:""}),l=T(()=>{let f={username:[{required:!0,message:e.value==="login"?"\u8BF7\u8F93\u5165\u7528\u6237\u540D/\u624B\u673A/\u90AE\u7BB1":"\u8BF7\u8F93\u5165\u7528\u6237\u540D",trigger:"blur"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801",trigger:"blur"}]};return e.value!="login"&&(f.repassword=[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},{validator:(_,u,n)=>{u!==t.password?n(new Error("\u4E24\u6B21\u8F93\u5165\u7684\u5BC6\u7801\u4E0D\u4E00\u81F4")):n()},trigger:["blur","input"]}]),f}),v=()=>{e.value=e.value==="login"?"reg":"login",i.value=e.value=="login"?"\u767B\u5F55":"\u6CE8\u518C",d.meta.title=i.value,t.username="",t.password="",t.repassword="",m.value.restoreValidation()},c=p(!1),y=()=>{m.value.validate(async f=>{if(f)return;const{message:_}=b(["message"]);c.value=!0;let{data:u}=e.value==="login"?await E(t).catch(({error:n})=>{_.info(n.msg),c.value=!1}):await R(t);if(c.value=!1,!!u)if(_.success(e.value==="login"?"\u767B\u5F55\u6210\u529F":"\u6CE8\u518C\u6210\u529F"),e.value==="login"){const n=j("token");n.value=u.value.token;const k=D();k.value=u.value,H(d.query.from||"/",{replace:!0})}else v()})};S(()=>y());const N={route:d,type:e,title:i,formRef:m,form:t,rules:l,changeType:v,loading:c,onSubmit:y,NForm:O,NInput:Q,NFormItem:P,NButton:A,NAlert:G,NTag:J,createDiscreteApi:b};return Object.defineProperty(N,"__isScriptSetup",{enumerable:!1,value:!0}),N}},M=o(" \u6F14\u793A\u8D26\u53F7\u548C\u5BC6\u7801\u4E3A\uFF1A "),W=o(" admin/admin123 "),X={class:"flex justify-between w-full mb-2"},Y=o("\u5FD8\u8BB0\u5BC6\u7801"),Z={class:"flex justify-center items-center w-full text-xs mt-5 text-gray-600"},$=o(" \u6CE8\u518C\u5373\u540C\u610F "),ee=o("\u300A\u670D\u52A1\u534F\u8BAE\u300B"),ae=o(" \u548C "),re=o("\u300A\u9690\u79C1\u653F\u7B56\u300B");function te(x,s,d,e,i,m){const t=L;return w(),V(z,null,[a(e.NAlert,{title:"",type:"info",class:"mb-6"},{default:r(()=>[M,a(e.NTag,{bordered:!1,type:"success"},{default:r(()=>[W]),_:1})]),_:1}),a(e.NForm,{class:"w-[340px]",ref:"formRef",model:e.form,rules:e.rules,size:"large"},{default:r(()=>[a(e.NFormItem,{"show-label":!1,path:"username"},{default:r(()=>[a(e.NInput,{clearable:"",value:e.form.username,"onUpdate:value":s[0]||(s[0]=l=>e.form.username=l),placeholder:e.type==="login"?"\u7528\u6237\u540D/\u624B\u673A/\u90AE\u7BB1":"\u7528\u6237\u540D"},null,8,["value","placeholder"])]),_:1}),a(e.NFormItem,{"show-label":!1,path:"password"},{default:r(()=>[a(e.NInput,{clearable:"",value:e.form.password,"onUpdate:value":s[1]||(s[1]=l=>e.form.password=l),placeholder:"\u5BC6\u7801",type:"password"},null,8,["value"])]),_:1}),e.type!="login"?(w(),C(e.NFormItem,{key:0,"show-label":!1,path:"repassword"},{default:r(()=>[a(e.NInput,{clearable:"",value:e.form.repassword,"onUpdate:value":s[2]||(s[2]=l=>e.form.repassword=l),placeholder:"\u786E\u8BA4\u5BC6\u7801",type:"password"},null,8,["value"])]),_:1})):U("",!0),g("div",X,[a(e.NButton,{quaternary:"",type:"primary",size:"tiny",onClick:e.changeType},{default:r(()=>[o(h(e.type==="login"?"\u6CE8\u518C":"\u767B\u5F55"),1)]),_:1}),a(t,{to:"/forget",class:"text-primary"},{default:r(()=>[a(e.NButton,{quaternary:"",type:"primary",size:"tiny"},{default:r(()=>[Y]),_:1})]),_:1})]),g("div",null,[a(e.NButton,{class:"w-full",type:"primary",onClick:e.onSubmit,loading:e.loading},{default:r(()=>[o(h(e.type==="login"?"\u767B \u5F55":"\u6CE8 \u518C"),1)]),_:1},8,["loading"])]),g("div",Z,[$,a(e.NButton,{quaternary:"",type:"primary",size:"tiny"},{default:r(()=>[ee]),_:1}),ae,a(e.NButton,{quaternary:"",type:"primary",size:"tiny"},{default:r(()=>[re]),_:1})])]),_:1},8,["model","rules"])],64)}var ce=B(K,[["render",te]]);export{ce as default};
