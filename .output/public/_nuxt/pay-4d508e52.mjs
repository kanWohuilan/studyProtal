import{k as j,o as l,e as k,bY as O,_ as S,r as f,bZ as b,h as o,a as I,w as T,ar as A,bx as B,d as s,n as M,b as v,am as g,i as d,g as a,aL as P}from"./entry-21db2f40.mjs";import{c as V,d as E}from"./order-2a28a7fd.mjs";import{_ as Q}from"./TimeBox-caea4e56.mjs";import{_ as R}from"./Price-f7b39efa.mjs";import{N as z}from"./Image-ec1fc6fc.mjs";import{N as L}from"./Alert-ea06a089.mjs";import{N as U}from"./Icon-8b068cec.mjs";import"./utils-4e919375.mjs";import"./Popover-ea85df19.mjs";import"./get-bc1ef6a5.mjs";import"./use-merged-state-aa6f3d5b.mjs";import"./next-frame-once-08317937.mjs";import"./use-locale-d1b818a5.mjs";const W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},q=O('<path d="M448 256c0-106-86-192-192-192S64 150 64 256s86 192 192 192s192-86 192-192z" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="32"></path><path d="M296 352h28a28 28 0 0 0 28-28v-28" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M352 216v-28a28 28 0 0 0-28-28h-28" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M216 352h-28a28 28 0 0 1-28-28v-28" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path d="M160 216v-28a28 28 0 0 1 28-28h28" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path>',5),D=[q];var G=j({name:"ScanCircleOutline",render:function(c,t){return l(),k("svg",W,D)}});const Y={__name:"QrCode",props:["data"],setup(_,{expose:c}){c();const t=_,e=f(null);b.toDataURL(t.data,{width:280,height:280,margin:2}).then(n=>{e.value=n});const r={props:t,src:e,NImage:z,QRCode:b};return Object.defineProperty(r,"__isScriptSetup",{enumerable:!1,value:!0}),r}},Z={class:"flex justify-center"};function $(_,c,t,e,r,n){return l(),k("div",Z,[o(e.NImage,{src:e.src,class:"border",width:"280",height:"280"},null,8,["src"])])}var F=S(Y,[["render",$]]);const H={__name:"pay",async setup(_,{expose:c}){c();let t,e;const r=I(),{no:n}=r.query,{data:x,error:u}=([t,e]=T(()=>V(n)),t=await t,e(),t),p=f(!1);function m(){p.value=!0}const h=f(!1),i=f(null);function y(){i.value&&clearInterval(i.value),i.value=setInterval(()=>{E(n).then(N=>{!N.error.value&&N.data.value.trade_state=="SUCCESS"&&w()})},2e3)}u.value||y();function w(){h.value=!0,i.value&&clearInterval(i.value),setTimeout(()=>{M("/user/buy/1",{replace:!0})},2e3)}const C={route:r,no:n,data:x,error:u,isTimeOut:p,handleTimeOut:m,ispay:h,timer:i,checkIspay:y,handleSuccess:w,NCard:A,NAlert:L,NIcon:U,ScanCircleOutline:G};return Object.defineProperty(C,"__isScriptSetup",{enumerable:!1,value:!0}),C}},J={class:"flex justify-center"},K=a(" \u6B63\u5728\u8DF3\u8F6C... "),X=a(" \u8BF7\u5237\u65B0\u9875\u9762\u91CD\u65B0\u652F\u4ED8 "),ee=d("h4",{class:"text-xl mb-2"},"\u5FAE\u4FE1\u652F\u4ED8",-1),te={class:"flex text-sm text-gray-500"},oe=a(" \u8DDD\u79BB\u4E8C\u7EF4\u7801\u8FC7\u671F\u8FD8\u5269\xA0 "),re=a("\uFF0C\u8FC7\u671F\u540E\u8BF7\u5237\u65B0\u9875\u9762\u91CD\u65B0\u83B7\u53D6 "),ne={class:"flex justify-center py-5"},se=a(" \u652F\u4ED8\u603B\u989D\uFF1A "),ae={class:"flex justify-center items-center py-4 text-green-500"},ce={class:"ml-3 text-gray-500 text-sm"},ie=a("\u8BF7\u4F7F\u7528\u5FAE\u4FE1\u626B\u4E00\u626B"),le=a("\u626B\u63CF\u4E8C\u7EF4\u7801\u652F\u4ED8");function _e(_,c,t,e,r,n){const x=Q,u=R,p=F,m=B("P"),h=P;return l(),k("div",J,[o(e.NCard,{class:"w-[450px] mb-10"},{default:s(()=>[o(h,null,{default:s(()=>[e.ispay?(l(),v(e.NAlert,{key:0,title:"\u652F\u4ED8\u6210\u529F",type:"success",class:"mb-2"},{default:s(()=>[K]),_:1})):e.isTimeOut?(l(),v(e.NAlert,{key:1,title:"\u652F\u4ED8\u8D85\u65F6",type:"error",class:"mb-2"},{default:s(()=>[X]),_:1})):g("",!0),ee,d("p",te,[oe,o(x,{expire:5,class:"text-rose-500",onEnd:e.handleTimeOut}),re]),d("h5",ne,[se,o(u,{value:e.data.price},null,8,["value"])]),e.data.code_url?(l(),v(p,{key:2,data:e.data.code_url},null,8,["data"])):g("",!0),d("div",ae,[o(e.NIcon,{size:"35"},{default:s(()=>[o(e.ScanCircleOutline)]),_:1}),d("div",ce,[o(m,null,{default:s(()=>[ie]),_:1}),o(m,null,{default:s(()=>[le]),_:1})])])]),_:1})]),_:1})])}var be=S(H,[["render",_e]]);export{be as default};
